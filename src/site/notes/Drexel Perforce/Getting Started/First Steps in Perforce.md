---
{"dg-publish":true,"permalink":"/drexel-perforce/getting-started/first-steps-in-perforce/"}
---

Now that your workspace and streams are set up, let's delve into some practical tasks within the P4V client. This guide focuses on exploring your workspace and streams through common and useful tasks in P4V, helping you become proficient in managing and navigating your projects. While command-line operations offer additional power for advanced users, most day-to-day tasks can be efficiently handled through the P4V client.
## Order of Operations
1. **Managing `.p4ignore` Files**
2. **Navigating Your Workspace**
3. **Editing Files**
4. **Adding Files**
5. **Working with Streams**

---
### Managing .ignore Files in Perforce

An essential part of working efficiently with Perforce is managing which files and directories are versioned and which are ignored. This is particularly important in game development projects where build directories, temporary files, or third-party libraries should not be submitted to the Perforce server. Perforce uses `.p4ignore` files to specify patterns for files and directories to ignore. Let's go through setting up and using `.p4ignore` files in your project.

#### Setting Up `.p4ignore` Support

##### Enable `.p4ignore` Support
- **Perforce Environment Setup**: To use `.p4ignore`, you must first enable support by setting the `P4IGNORE` environment variable to `.p4ignore`.

    - **Windows**:
      - Open the Command Prompt.
      - Type `setx P4IGNORE .p4ignore` and press Enter.
      - **System GUI**:
        - Right-click `This PC` > `Properties` > `Advanced system settings`.
        - Under `System Properties`, click `Environment Variables`.
        - Click `New` under `User variables` or `System variables`.
        - Set `Variable name` to `P4IGNORE` and `Variable value` to `.p4ignore`.
        - Click `OK` to save.
        
    - **macOS/Linux**:
      - Open the Terminal.
      - Add `export P4IGNORE=.p4ignore` to your `.bashrc`, `.zshrc`, or equivalent.
      - **macOS System GUI**:
        - Go to `System Preferences` > `Users & Groups`.
        - Select your user and click `Login Items`.
        - Click the `+` button and navigate to your shell profile script to add it (additional steps may be required for direct environment variable setup via GUI).

*A Restart your machine may be required to activate the changes.*

---
#### Creating a `.p4ignore` File

- **Template Depots**: For courses and projects working from Template Depots, a `.p4ignore` file will be included, pre-populated with common patterns for Unity and Unreal projects.
	- While the included p4ignore does cover many of the common tools and software packages used for Unity and Unreal development, it is not exhaustive. If a new tool not listed is used, be sure to update the file with the relevant ignore patterns as to not create merge problems and depot bloat.
	- A link to the template p4ignore file: [.p4ignore](https://1drv.ms/u/s!AqQzGx8l4o2wk-Uwx2zueqzz8ZkPwA?e=MjDTut)
- **Manual Creation**:
  - In your workspace's root directory, create a `.p4ignore` file.
  - Open this file in any text editor and define the patterns for files to ignore. For example:
``` plaintext
# Ignore all temporary files - Often generated by editors or operating systems
*.tmp

# Ignore the 'build' directory - Contains compiled code and build artifacts
# that should not be version-controlled as they are generated from source
build/

# Ignore all files in 'temp' directories - Used for temporary storage by applications
# or for intermediate files during building or compiling
temp/**
```


#### Applying `.p4ignore` Patterns

- With `.p4ignore` set, P4V and Perforce command line tools will ignore files matching these patterns when adding new files to version control.
- This file can be edited with any IDE or text editor to fit a project's specifics.
- Further documentation on creating and managing `.p4ignore` files can be found here: [Helix Core Command-Line (P4) Reference (2023.2)⁤ (perforce.com)](https://www.perforce.com/manuals/cmdref/Content/CmdRef/P4IGNORE.html)

---
### Best Practices for .p4ignore Files

- **Commit .p4ignore**: While the `.p4ignore` file itself should be personal and not always shared across the team (as different developers might have different environments), it's often useful to have a team-standard `.p4ignore` file that's committed to the repository. This ensures consistent ignore rules across all team members' environments.
- **Specificity**: Be as specific as possible with your ignore patterns to avoid accidentally ignoring important files.
- **Regular Updates**: As your project evolves, regularly review and update your `.p4ignore` file to match new tools, directories, and file types that should be ignored.
---
### Navigating Your Workspace

Your workspace serves as a personal local copy of files from the server, customized for your individual tasks. Below are steps to efficiently navigate and manage your workspace in P4V:
#### Viewing Your Files
- Navigate to the ***Workspace Tree*** tab in P4V to view the files and folders within your local workspace. This allows you to explore the current structure and content you're working with.
	- This view can be accessed through the menu by navigating to `View > Workspace Tree` or by using the shortcut `Ctrl + 0` (Windows/Linux) or `Cmd + 0` (macOS).
	-  <img src = "https://i.postimg.cc/k43L3FzN/p4v-workspace-Tree-tab.gif">
- **Files** can also be found under the Files tab, assuming the correct workspace is configured and the file directory has been selected in the Workspace Tree.
	- This view can be accessed through the menu by navigating to `View > Files in Folder`.
#### Syncing to the Latest Version
- To ensure your work is based on the most recent file versions, right-click in your workspace and choose ***Get Latest Revision***. Or select the workspace and hit the Get Latest button. This action synchronizes your workspace with the server's latest revisions.
-  Optionally you can use the shortcut `Ctrl + Shift + G` (Windows/Linux) or `Cmd + Shift + G` (macOS).
	- <img src = "https://i.postimg.cc/QdzRSrqy/p4v-get-Latest.gif">
#### Checking Out Files
- To modify any file, *it must be checked out first*. Right-click the desired file (or entire folder) in the ***Workspace Tree*** or ***Files*** tabs and select ***Check Out***. This action locks the file for editing, signaling to your team that you are making changes.
	- Optionally you can use the shortcut `Ctrl + E` (Windows/Linux) or `Cmd + E` (macOS).
	- <img src ="https://i.postimg.cc/j5HmsnYp/p4v-check-Out.gif">
#### Submitting Changes
- When files are *checked out* and opened for editing they will end up in ***Pending*** tab. This tab shows the current pending "changelist" ready to be submitted to the depot.
- This view can be accessed through the menu by navigating to `View > Pending Changelists` or by using the shortcut `Ctrl + 1` (Windows/Linux) or `Cmd + 1` (macOS).
	- <img src="https://i.postimg.cc/sx381fVv/p4v-pending-Changelist.gif">

- Upon completing your edits, select the modified file(s) and select ***Submit.*** A dialog will prompt you to describe your changes. Completing this step commits your changes to the server, sharing them with your team. 
	- Optionally you can use the shortcut `Ctrl + S` (Windows/Linux) or `Cmd + S` (macOS).
- Ensure you provide a detailed and informative description in the changelist dialog to clearly communicate the nature and purpose of your changes.
	- <img src="https://i.postimg.cc/SRVP90sV/p4v-submit.gif">

---
### Editing Files
Editing involves checking out a file, making your changes, and then submitting those changes back to Perforce.

- **Check Out**: Right-click the file and select 'Check Out'.
- **Edit**: Make your changes using your preferred editor.
- **Submit**: Right-click the edited file and select 'Submit' to commit your changes, with a descriptive message of what was modified.

---
### Adding Files
Adding files to Perforce is a straightforward process, whether you're populating a new workspace for the first time or adding new assets to an ongoing project.

- **Create or Place Files**: In your local workspace directory, create new files or place existing ones that you wish to add to version control.
- **Add Files to Perforce**: In P4V, navigate to the root of your workspace or the directory where you have added files. Right-click and select ***Mark for Add***. Or, choose the individual files you wish to add, then click ***Add***.
- <img src="https://i.postimg.cc/HL7FhPZs/p4v-add.gif">
- **Submit Changes**: After adding, a changelist will be created. Right-click this changelist and select 'Submit' to finalize adding your files to the depot.

#### For First-Time Setup in an Empty Depot
If opening your workspace for the first time and your depot is empty, you'll need to add files to begin version control.

---

### P4V Workflow - Best Practices

1. **Get Latest Version**: Before you start, sync your workspace to get the latest files from the server to avoid conflicts.
2. **Check Out Files**: Indicate you're working on files by checking them out, which alerts your team to avoid overlapping work. Only checkout the necessary files whenever possible, try to avoid checking out entire folders.
3. **Edit**: Make your changes using your preferred tools.
4. **Review Changes**: Before submitting, review your changes for errors or unnecessary modifications. It is a good idea to right-click the changelist and select ***Revert  If Unchanged***.
5. **Resolve Conflicts**: If there are any conflicts with the server version, resolve them to ensure smooth integration.
6. **Test Locally**: Verify your changes don't introduce new issues by running tests or manual checks.
7. **Submit Changes**: Commit your work to the server with a detailed description for your team. Always commit all files before you stop working, this will ensure they are not locked for other team members.
8. **Communicate**: Keep your team in the loop about your changes, especially if they impact shared work.
9. **Regular Syncs**: Frequently update your workspace with the server to stay current and minimize conflicts.

---
### Working with Streams

Streams are branches defined with a purpose, making it easier to manage and integrate changes. Here’s how to work with them:

1. **Viewing Stream Structure**:
    - The ***Stream Graph*** tab in P4V gives you a graphical representation of your project's stream structure. Explore this view to understand how different streams relate to each other, such as mainline, development, and release streams.
    - This view can be accessed through the menu by navigating to `View > Stream Graph` or by using the shortcut `Alt + 7` (Windows/Linux) or `Option + 7` (macOS).
2. **Switching Streams**:
    - If you need to work on a different part of the project, you can switch your workspace to another stream that is dedicated to that task (i.e. `dev`). There are a couple of ways to switch to a different stream. 
        - Right-click your workspace name in the ***Workspaces*** tab and choose ***Edit Workspace***, then select the stream you wish to work on. In the Stream: dialog box, search for the desired stream. Hit ***Apply*** the ***OK***.
        - Alternatively, you can use the ***Stream Graph*** tab. Grab the computer icon and drag it onto the stream you wish to switch to.
        - <img src="https://i.postimg.cc/Lsbj02CG/p4v-stream-Graph-switch.gif">
        - *You may at times be prompted to create a new workspace for a stream. This is okay to do, but first consider the impact additional workspaces may have on your workflow and p4v setup.*
3. **Merging and Integrating Changes**:
    - Streams facilitate merging changes from one branch to another. To merge, right-click on the stream you want to integrate changes into and select 'Merge/Integrate'. Follow the prompts to select the source stream and resolve any conflicts that arise.
    - *Note: To successfully merge and integrate files into a stream, it must be set as your active working stream.*
    - <img src="https://i.postimg.cc/FRk3M8wz/p4v-stream-Graph-merge.gif">

---

### Additional/Optional: Command Line Basics

For those interested in exploring beyond the P4V client, here are a few basic command-line operations. These are optional but can offer more control and flexibility:

- **Check Out a File**: `p4 edit <filename>`
- **Submit Changes**: `p4 submit -d "Description of changes" <filename>`
- **Sync Workspace**: `p4 sync`

These command-line operations are a glimpse into the power of Perforce from the terminal. They are particularly useful for advanced tasks or automation.

---
### Official Helix Core/P4 Documentation:

https://help.perforce.com/helix-core/quickstart/Content/quickstart/end-user-reference.html

Getting strated with Unity 3D: https://help.perforce.com/helix-core/quickstart-unity/Content/quickstart/game-home-quickstart.html
Getting started with Unreal Engine: https://help.perforce.com/helix-core/quickstart-unreal/Content/quickstart/game-home-quickstart.html